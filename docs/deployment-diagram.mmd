flowchart LR
  subgraph User_Device[Client Browser / Mobile App]
    UI[Frontend SPA<br/>(React / Static Hosting)]
  end

  subgraph Cloud_Edge[API Gateway Layer]
    GW[Reverse Proxy / API Gateway<br/>(Nginx or Spring Cloud Gateway)]
  end

  subgraph BackendCluster[Application Tier<br/>Spring Boot Cluster]
    APP[Petstore Backend<br/>Spring Boot 3.x<br/>Docker Container]
    AUTH[Auth Module<br/>(JWT Issuer & Session Control)]
    INVENTORY[Inventory Module<br/>(Productos, Notificaciones)]
  end

  subgraph DataLayer[Data Tier]
    DB[(PostgreSQL<br/>Managed Instance)]
    Secrets[Secrets Manager<br/>(Environment Variables)]
  end

  subgraph CI_CD[CI/CD Pipeline]
    GH[GitHub Repository]
    Runner[GitHub Actions Runner]
    Registry[(Container Registry)]
  end

  UI -->|HTTPS| GW
  GW -->|JWT Auth + REST/JSON| APP
  APP --> AUTH
  APP --> INVENTORY
  AUTH --> DB
  INVENTORY --> DB
  APP -->|Read Secrets| Secrets

  GH -->|Push| Runner
  Runner -->|Build & Test (Maven)| APP
  Runner -->|Build Image| Registry
  Registry -->|Pull Image| BackendCluster

  note right of APP: Port 8080<br/>Spring Security + JWT
  note bottom of GW: TLS Termination<br/>CORS / Rate Limit
  note bottom of Runner: Stages: build → test → package → deploy

